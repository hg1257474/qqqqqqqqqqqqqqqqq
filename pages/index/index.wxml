<view class="main">
  <view class="nav-bar">
  <!--bindtap="onCategoryTap"-->
    <view wx:for="{{indexPage}}" wx:key="{{index}}" data-id="{{index}}" class="category {{ category === index ? 'category-selected':''}}" bindtap="onCategoryTap" data-current="{{index}}">
      <image mode="aspectFit" src="{{item['icon']}}" class="category-icon"></image>
      <view class="category-name">{{item['tittle']}}</view>
    </view>
  </view>

  <view class="content-bar" >
    <view wx:for="{{indexPage}}" wx:for-index="idx" wx:for-item="services" wx:key="{{idx}}">
      <view class="services-name">{{services['tittle']}}</view>
        <view class="services-introduction">({{services['tips']}})</view>
        <view wx:for="{{services['right_part']}}" wx:key="{{index}}" class="service-box">
          <image class="service-icon" mode="aspectFit" src="{{item['icon']}}"></image>
          <view class="service-content">
            <view class="service-name">{{item['tittle']}}</view>
            <view class="service-introduction">{{item['tips']}}</view>
            <view bindtap="onChoose" data-service="{{index}}" data-category="{{idx}}" class="{{(idx==modal.category&&index===modal.service)?'to-talk service-selected':'to-talk'}}"></view>
          </view>
        </view>
      </view>

    </view>

</view>

<view wx:if="{{modal.show}}">
  <modal bindcommunication="onCommunication" bindcontract="onContract" bindclose="onClose" icon="{{modal.icon}}" name="{{modal.name}}" content="{{modal.content}}" />
</view>
